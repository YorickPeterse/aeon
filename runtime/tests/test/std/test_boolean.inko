import std::hash::Hasher
import std::test::*

def tests(t: ref Tests) {
  t.group('std::boolean::Boolean.true?') do (g) {
    g.test('Checking if a Boolean is True') {
      try assert_true(True.true?)
      try assert_false(False.true?)
    }
  }

  t.group('std::boolean::Boolean.false?') do (g) {
    g.test('Checking if a Boolean is False') {
      try assert_false(True.false?)
      try assert_true(False.false?)
    }
  }

  t.group('std::boolean::Boolean.truthy?') do (g) {
    g.test('Checking if a Boolean is truthy') {
      try assert_true(True.truthy?)
      try assert_false(False.truthy?)
    }
  }

  t.group('std::boolean::Boolean.and') do (g) {
    g.test('Sending "and" to True') {
      try assert_equal(True.and({ True }), True)
    }

    g.test('Sending "and" to False') {
      try assert_equal(False.and({ True }), False)
    }
  }

  t.group('std::boolean::Boolean.or') do (g) {
    g.test('Sending "or" to True') {
      try assert_equal(True.or({ False }), True)
    }

    g.test('Sending "or" to False') {
      try assert_equal(False.or({ True }), True)
    }
  }

  t.group('std::boolean::Boolean.==') do (g) {
    g.test('Comparing True with another Boolean') {
      try assert_equal(True, True)
      try assert_not_equal(True, False)
    }

    g.test('Comparing False with another Boolean') {
      try assert_equal(False, False)
      try assert_not_equal(False, True)
    }
  }

  t.group('std::boolean::Boolean.to_string') do (g) {
    g.test('Converting True to a String') {
      try assert_equal(True.to_string, 'True')
    }

    g.test('Converting False to a String') {
      try assert_equal(False.to_string, 'False')
    }
  }

  t.group('std::boolean::Boolean.hash') do (g) {
    g.test('Hashing True') {
      let hasher1 = Hasher.new(1, 2)
      let hasher2 = Hasher.new(1, 2)

      True.hash(ref hasher1)
      True.hash(ref hasher2)

      # The exact hash value may change between OS processes or releases, so all
      # we can do is assert that the value is the same every time we send `hash`
      # to `True`.
      try assert_equal(hasher1.to_hash, hasher2.to_hash)
    }

    g.test('Hashing False') {
      let hasher1 = Hasher.new(1, 2)
      let hasher2 = Hasher.new(1, 2)

      False.hash(ref hasher1)
      False.hash(ref hasher2)

      # The exact hash value may change between OS processes or releases, so all
      # we can do is assert that the value is the same every time we send `hash`
      # to `True`.
      try assert_equal(hasher1.to_hash, hasher2.to_hash)
    }
  }

  t.group('std::boolean::Boolean.and') do (g) {
    g.test('Using True as the receiver') {
      try assert_true(True.and({ True }))
      try assert_false(True.and({ False }))
    }

    g.test('Using False as the receiver') {
      try assert_false(False.and({ True }))
    }
  }

  t.group('std::boolean::Boolean.or') do (g) {
    g.test('Using True as the receiver') {
      try assert_true(True.or({ True }))
      try assert_true(True.or({ False }))
    }

    g.test('Using False as the receiver') {
      try assert_true(False.or({ True }))
      try assert_false(False.or({ False }))
    }
  }
}
