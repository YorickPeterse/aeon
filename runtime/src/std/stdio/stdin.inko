# Methods for reading from STDIN.
#
# This module provides various methods for reading data from STDIN.
import std::io::(Read, Error)
import std::process::(blocking)

extern def stdin_read(
  bytes: ref ByteArray,
  size: ref Int
) !! Int -> Int

impl Read for ThisModule {
  def read(into: ref ByteArray, size: Int) !! Error -> Int {
    try blocking {
      try stdin_read(into, size) else (error) throw Error.new(error)
    }
  }
}
